#!/bin/bash
source ./script/utils

if [ "$CODESPACES_VSCODE_FOLDER" = "/workspaces/dotfiles" ]; then
  DOTFILES_DIR=/workspaces/.codespaces/.persistedshare/dotfiles
else
  DOTFILES_DIR=/workspaces/dotfiles
fi

export DOTFILES_DIR

define PKGLIST <<EOF
  stow
  zsh
  tmux
EOF
export PKGLIST

function bootstrap() {
  sudo apt-get update
  xargs sudo apt-get install -y <<<$PKGLIST
}

function is_bootstrapped() {
  while read pkg; do
    if ! dpkg -l $pkg &>/dev/null; then
      return 1
    fi
  done <<<$PKGLIST
  return 0
}

function setup() {
  init_git
  init_zsh
  init_tmux
}
